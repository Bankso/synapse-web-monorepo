/*! markdown-it-synapse 1.1.8  @license MIT */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.markdownitSynapse=e()}}(function(){return function(){function e(r,n,t){function s(a,i){if(!n[a]){if(!r[a]){var u="function"==typeof require&&require;if(!i&&u)return u(a,!0);if(o)return o(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var c=n[a]={exports:{}};r[a][0].call(c.exports,function(e){return s(r[a][1][e]||e)},c,c.exports,e,r,n,t)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<t.length;a++)s(t[a]);return s}return e}()({1:[function(e,r,n){"use strict";function t(e,r){var n,t,s,o,a=null;for(n=e.split("?"),t=n[1].split("&"),s=0;s<t.length;s++)o=t[s].split("="),r===o[0]&&(a=o[1]);return a}function s(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function o(e){if(e>=65&&e<=90)return!0;if(e>=48&&e<=57)return!0;if(e>=97&&e<=122)return!0;switch(e){case 64:case 46:case 45:case 95:return!0}return!1}function a(e,r,n){return n=n||0,e.substr(n,r.length)===r}function i(e){return e.length>2&&v.test(e.substr(0,2))}function u(e,r){var n,a,i,u,l,h,m=e.posMax,v=e.pos,w="widgetContainer";if(v+3>=m)return!1;if(r)return!1;if(64===e.src.charCodeAt(v)){if(v>0&&!s(e.src.charCodeAt(e.pos-1)))return!1;for(;e.pos<m&&!s(e.src.charCodeAt(e.pos))&&o(e.src.charCodeAt(e.pos));)e.pos++;return a=e.src.slice(v+1,e.pos),e.posMax=e.pos,e.pos=v,i=e.push("synapse_open","span",1),i.markup="@",i.attrs=[["data-widgetparams","badge?alias="+a],["data-widget-type","badge"],["class",w],["id","widget-"+c+p]],i=e.push("link_open","a",1),i.attrs=[["href","https://www.synapse.org/Portal/aliasredirector?alias="+a]],i.markup="autolink",i.info="auto",i=e.push("text","",0),i.content="@"+a,i=e.push("link_close","a",-1),i.markup="autolink",i.info="auto",i=e.push("text","",0),i=e.push("synapse_close","span",-1),e.pos=e.posMax,e.posMax=m,c+=1,!0}if(36!==e.src.charCodeAt(v))return!1;if(123!==e.src.charCodeAt(v+1))return!1;for(e.pos=v+2;e.pos<m;){if(125===e.src.charCodeAt(e.pos)){n=!0;break}e.md.inline.skipToken(e)}return n&&v+2!==e.pos?(a=e.src.slice(v+2,e.pos),u=a.replace(k,"$1"),0===a.lastIndexOf(g,0)?(u+="&footnoteId="+f,i=e.push("synapse_reference_open","span",1),i.attrs=[["id","wikiReference"+f]],i=e.push("synapse_reference_close","span",-1),l=decodeURIComponent(u),h=t(l,"text"),h&&(d+="${bookmark?text=["+f+"]&bookmarkID=wikiReference"+f+"} "+h+"\n"),f++,w="inlineWidgetContainer"):0===a.lastIndexOf(x,0)&&(i=e.push("synapse_footnote_target_open","span",1),i.attrs=[["id","wikiFootnote"+f]],i=e.push("synapse_footnote_target_close","span",-1),f++,w="inlineWidgetContainer"),e.posMax=e.pos,e.pos=v+2,i=e.push("synapse_open","span",1),i.markup="${",i.attrs=[["data-widgetparams",u],["class",w],["id","widget-"+c+p],["data-widget-type",u.substring(0,u.indexOf("?"))]],i=e.push("text","",0),i.content="<Synapse widget>",i=e.push("synapse_close","span",-1),i.markup="}",e.pos=e.posMax+1,e.posMax=m,c+=1,!0):(e.pos=v,!1)}var p,c,l,f,d,h,k=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g,g="reference?",x="bookmark?",m=new RegExp("^syn([0-9]+[.]?[0-9]*)+"),v=new RegExp(/^\/\w/),w=new RegExp("^([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/w \\.-]*)*\\/?.*$"),_=new RegExp("^doi:10[.]{1}[0-9]+[/]{1}[a-zA-Z0-9_.]+$"),y=new RegExp("^\\s*(width[=]{1})?\\s*(.*)[}]{1}\\s*$"),C=new RegExp('^\\s*(text[=]{1}["]{1})?\\s*(.*)["]{1}[}]{1}\\s*$'),b=new RegExp("^\\s*[*-+>]{1}[^|]*$"),A=new RegExp("^\\s*\\w+\\s*[.)]{1}[^|]*$"),M=new RegExp("^\\s*[`]{3}s*([a-zA-Z_0-9-]*)s*$");r.exports=function(e,r,n){c=0,l=0,f=1,p=r,d="",h="",n&&(h=n),e.inline.ruler.after("emphasis","synapse",u)},r.exports.footnotes=function(){return d},r.exports.resetFootnotes=function(){d="",f=1},r.exports.preprocessMarkdown=function(e){for(var r="",n=e.split("\n"),t=!1,s=!1,o=!1,a=0;a<n.length;a++)M.test(n[a])&&(o=!o),o||(s=b.test(n[a])||A.test(n[a]),t&&!s&&(r+="\n"),t=s),r+=n[a]+"\n";return r},r.exports.init_markdown_it=function(e,r,n,t,s,o,u,c,f,d,k){function g(){var r=e.renderer.rules.link_open||function(e,r,n,t,s){return s.renderToken(e,r,n)};e.renderer.rules.link_open=function(e,n,t,s,o){var u=e[n].attrIndex("target"),p=e[n].attrIndex("href"),c=a(e[n].attrs[p][1],"#!"),l=i(e[n].attrs[p][1]);return u<0?(p<0||!l&&!c)&&(e[n].attrPush(["target","_blank"]),e[n].attrPush(["ref","noopener noreferrer"])):(e[n].attrs[u][1]="_blank",e[n].attrPush(["ref","noopener noreferrer"])),r(e,n,t,s,o)}}function x(){var r=e.renderer.rules.table_open||function(e,r,n,t,s){return s.renderToken(e,r,n)};e.renderer.rules.table_open=function(e,n,t,s,o){var a=e[n].attrIndex("class");return a<0?e[n].attrPush(["class","markdowntable"]):e[n].attrs[a][1]+=" markdowntable",r(e,n,t,s,o)}}function v(){e.linkify.set({fuzzyLink:!1}),e.linkify.add("syn",{validate:function(e,r,n){var t=e.slice(r);return n.re.synapse||(n.re.synapse=new RegExp("^([0-9]{3,}[.]?[0-9]*(\\/wiki\\/[0-9]+)?)+(?!_)(?=$|"+n.re.src_ZPCc+")")),n.re.synapse.test(t)?t.match(n.re.synapse)[0].length:0},normalize:function(e){e.url=h+"#!Synapse:"+e.url.replace(/[.]/,"/version/")}}),e.linkify.add("doi:10.",{validate:function(e,r,n){var t=e.slice(r);return n.re.doi||(n.re.doi=new RegExp("^[0-9]+[/]{1}[a-zA-Z0-9_.]+(?!_)(?=$|"+n.re.src_ZPCc+")")),n.re.doi.test(t)?t.match(n.re.doi)[0].length:0},normalize:function(e){e.url="https://doi.org/"+e.url}})}function b(r,n){var t,s,o,a,i,u,p,c,l,f,d="",k=r.pos,g=r.posMax,x=r.pos,v=e.helpers.parseLinkLabel,y=e.helpers.parseLinkDestination,C=e.helpers.parseLinkTitle,b=e.utils.isSpace,A=e.utils.normalizeReference;if(91!==r.src.charCodeAt(r.pos))return!1;if(i=r.pos+1,(a=v(r,r.pos,!0))<0)return!1;if((u=a+1)<g&&40===r.src.charCodeAt(u)){for(u++;u<g&&(s=r.src.charCodeAt(u),b(s)||10===s);u++);if(u>=g)return!1;if(x=u,p=y(r.src,u,r.posMax),p.ok){var M=p.str;m.test(M)?p.str=h+"#!Synapse:"+M.replace(/[.]/,"/version/"):w.test(M)?p.str="http://"+M:_.test(M)&&(p.str="http://dx.doi.org/"+M),d=r.md.normalizeLink(p.str),r.md.validateLink(d)?u=p.pos:d=""}for(x=u;u<g&&(s=r.src.charCodeAt(u),b(s)||10===s);u++);if(p=C(r.src,u,r.posMax),u<g&&x!==u&&p.ok)for(l=p.str,u=p.pos;u<g&&(s=r.src.charCodeAt(u),b(s)||10===s);u++);else l="";if(u>=g||41!==r.src.charCodeAt(u))return r.pos=k,!1;u++}else{if(void 0===r.env.references)return!1;if(u<g&&91===r.src.charCodeAt(u)?(x=u+1,u=v(r,u),u>=0?o=r.src.slice(x,u++):u=a+1):u=a+1,o||(o=r.src.slice(i,a)),!(c=r.env.references[A(o)]))return r.pos=k,!1;d=c.href,l=c.title}return n||(r.pos=i,r.posMax=a,f=r.push("link_open","a",1),f.attrs=t=[["href",d]],l&&t.push(["title",l]),r.md.inline.tokenize(r),f=r.push("link_close","a",-1)),r.pos=u,r.posMax=g,!0}function A(e,r,n){for(var t,s,o,a=n,i=r,u=e.charCodeAt(n);a<i&&e.charCodeAt(a)===u;)a++;return t=a-n,s=!0,o=!0,{can_open:s,can_close:o,length:t}}function M(e,r){var n,t,s,o=e.pos,a=e.src.charCodeAt(o);if(r)return!1;if(95!==a&&42!==a)return!1;for(t=A(e.src,e.posMax,e.pos),n=0;n<t.length;n++)s=e.push("text","",0),s.content=String.fromCharCode(a),e.delimiters.push({marker:a,jump:n,token:e.tokens.length-1,level:e.level,end:-1,open:t.can_open,close:t.can_close});return e.pos+=t.length,!0}!function(){e.set({html:!0,breaks:!0,linkify:!0,maxNesting:100}),e.disable(["heading"]),e.disable(["lheading"]),r&&e.use(r),n&&e.use(n),t&&e.use(t),s&&e.use(s),o&&e.use(o),u&&e.use(u),f&&e.use(f),d&&e.use(d),k&&e.use(k),c&&(e.use(c,"row",{marker:"{row}",minMarkerCount:1,render:function(e,r){return 1===e[r].nesting?'<div class="container-fluid"><div class="row">':"</div></div>\n"},validate:function(){return!0}}),e.use(c,"column",{marker:"{column",endMarker:"{column}",minMarkerCount:1,render:function(r,n){var t,s;return 1===r[n].nesting?(t=y.exec(r[n].info),s='<div class="col-sm-'+e.utils.escapeHtml(t[2])+'">'):s="</div>\n",s},validate:function(e){return y.test(e)}}),e.use(c,"nav",{marker:"{nav",endMarker:"{nav}",minMarkerCount:1,render:function(r,n){var t,s;return 1===r[n].nesting?(t=C.exec(r[n].info),s='<div id="nav-target-'+l+p+'" target-text="'+e.utils.escapeHtml(t[2])+'">',l+=1):s="</div>\n",s},validate:function(e){return C.test(e)}})),g(),v(),x(),e.inline.ruler.at("link",b),e.inline.ruler.at("emphasis",M)}()}},{}]},{},[1])(1)});
